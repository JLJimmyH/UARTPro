{
  "project": "UART PRO v0.1",
  "spec_version": "1.0",
  "spec_date": "2025-02-11",
  "description": "UX é‡æ§‹è¦æ ¼ â€” é‡å°é•·æ™‚é–“ UART log ç›£æ§èˆ‡ç¯©é¸åˆ†æå ´æ™¯å„ªåŒ–",

  "tech_stack": {
    "framework": "Qt 6 Quick (QML) + C++ backend",
    "ui_entry": "main.qml (1793 lines)",
    "backend": "SerialPortManager.h / .cpp",
    "custom_components": [
      "CyberButton.qml",
      "CyberCheckBox.qml",
      "CyberComboBox.qml",
      "CyberTextField.qml"
    ]
  },

  "current_layout": {
    "window": { "default_size": "1200x800", "min_size": "900x600", "frameless": true },
    "structure": [
      { "zone": "title_bar", "height": "52px", "content": "UART PRO title + theme switcher + connection indicator + window controls" },
      { "zone": "content_area", "layout": "RowLayout", "children": [
        { "zone": "left_panel", "width": "280px fixed", "content": "CONNECTION / OPTIONS / KEYWORDS / WHITELIST / BLACKLIST / ACTIONS â€” all in scrollable Flickable" },
        { "zone": "right_panel", "width": "fill", "children": [
          { "zone": "terminal_header", "height": "36px", "content": "traffic lights + title + stats (FILTERED/SEL/HEX/ENTRIES)" },
          { "zone": "terminal_view", "height": "fill", "content": "ListView with terminalModel, delegate with timestamp + prefix + richtext data" },
          { "zone": "send_area", "height": "52px", "content": "HEX/ASCII toggle + input + line ending selector + TRANSMIT button" }
        ]}
      ]},
      { "zone": "status_bar", "height": "30px", "content": "PORT info / RX bytes / TX bytes / UPTIME / version" }
    ]
  },

  "design_goals": [
    "æœ€å¤§åŒ–çµ‚ç«¯ log å¯è¦–é¢ç© â€” log å…§å®¹æ˜¯é•·æ™‚é–“ç›£æ§çš„ä¸»è§’",
    "ç¯©é¸åˆ†ææ“ä½œå¿…é ˆé«˜æ•ˆç›´è¦º â€” æ¸›å°‘æ“ä½œæ­¥é©Ÿ",
    "é•·æ™‚é–“é‹è¡Œç©©å®šæ€§ â€” è¨˜æ†¶é«”ç®¡ç†ã€è‡ªå‹•å­˜æª”ã€ä¸ä¸Ÿè³‡æ–™",
    "æ¸…æ¥šçš„ç‹€æ…‹å›é¥‹ â€” ä½¿ç”¨è€…éš¨æ™‚çŸ¥é“ç›®å‰ç‹€æ…‹ï¼ˆéŒ„è£½ä¸­ã€æš«åœæ»¾å‹•ã€ç¯©é¸ä¸­ï¼‰",
    "ç¶­æŒç¾æœ‰ Cyber è¨­è¨ˆèªè¨€é¢¨æ ¼"
  ],

  "changes": [

    {
      "id": "CH-01",
      "title": "å·¦å´é¢æ¿å¯æŠ˜ç–Š/æ”¶åˆ",
      "priority": "P0",
      "category": "layout",
      "problem": "å·¦å´é¢æ¿å›ºå®š 280px æ°¸é ä½”æ“šæ°´å¹³ç©ºé–“ï¼Œé•·æ™‚é–“ç›£æ§æ™‚ log è¡Œéé•·æœƒè¢«è¿«æ›è¡Œï¼Œé™ä½å¯è®€æ€§ã€‚é€£ç·šå»ºç«‹å¾Œï¼Œä½¿ç”¨è€…å¹¾ä¹ä¸éœ€è¦å†æ“ä½œé€£ç·šè¨­å®šã€‚",
      "solution": {
        "description": "å°‡å·¦å´é¢æ¿æ”¹ç‚ºå¯æŠ˜ç–Šå¼ï¼Œé è¨­å±•é–‹ï¼Œé€£ç·šå¾Œå¯æ”¶åˆã€‚æ”¶åˆæ™‚åƒ…é¡¯ç¤ºä¸€å€‹çª„çš„åœ–ç¤ºåˆ—ï¼ˆ~40pxï¼‰ï¼Œå±•é–‹æ™‚æ¢å¾©åŸå§‹ 280px å¯¬åº¦ã€‚",
        "behavior": [
          "æ–°å¢ property bool sidePanelCollapsed: false",
          "æ¨™é¡Œæ¬„å·¦å´æ–°å¢æ¼¢å ¡é¸å–®æŒ‰éˆ• â˜°ï¼ˆæˆ–ä½¿ç”¨ sidebar toggle iconï¼‰ï¼Œé»æ“Šåˆ‡æ› sidePanelCollapsed",
          "æ–°å¢å¿«æ·éµ Ctrl+B åˆ‡æ›é¢æ¿",
          "æ”¶åˆæ™‚å·¦å´é¢æ¿å¯¬åº¦å¾ 280px ä»¥å‹•ç•«éæ¸¡åˆ° 40px",
          "æ”¶åˆç‹€æ…‹ä¸‹åƒ…é¡¯ç¤ºåœ–ç¤ºåˆ—ï¼šé€£ç·šç‹€æ…‹ç‡ˆã€æš«åœ/æ’­æ”¾æŒ‰éˆ•ã€æ¸…é™¤æŒ‰éˆ•ã€éŒ„è£½æŒ‰éˆ•",
          "é»æ“Šåœ–ç¤ºåˆ—ä¸­çš„ä»»ä½•åœ–ç¤ºæˆ–æŒ‰ â˜° å¯å±•é–‹é¢æ¿",
          "å±•é–‹/æ”¶åˆä½¿ç”¨ Behavior on width { NumberAnimation { duration: 200; easing.type: Easing.OutCubic } }"
        ],
        "collapsed_icon_bar": {
          "width": "40px",
          "icons_top_to_bottom": [
            { "icon": "â—", "color": "dynamic (green=online, red=offline)", "tooltip": "Connection status", "action": "toggle panel" },
            { "icon": "â¸/â–¶", "color": "colorAccentTertiary", "tooltip": "Pause/Resume auto-scroll", "action": "toggle autoScroll" },
            { "icon": "âŠ˜", "color": "colorDestructive", "tooltip": "Clear terminal", "action": "clearTerminal()" },
            { "icon": "â—", "color": "red (recording) / colorMutedFg", "tooltip": "Log to file", "action": "toggle recording" }
          ]
        },
        "affected_code": {
          "main.qml": [
            "Line 569-1033: Left panel Rectangle â€” wrap in Item with width animation, add collapsed state",
            "Line 307-311: titleBar RowLayout â€” add hamburger menu button as first item",
            "Line 134-144: Shortcuts â€” add Ctrl+B shortcut"
          ]
        }
      }
    },

    {
      "id": "CH-02",
      "title": "æœå°‹åŠŸèƒ½ (Ctrl+F)",
      "priority": "P0",
      "category": "filtering",
      "problem": "åˆ†æ log æ™‚æœ€åŸºæœ¬çš„éœ€æ±‚æ˜¯æœå°‹è·³è½‰ï¼Œç›®å‰åªæœ‰é—œéµè©é«˜äº®ä½†ç„¡æ³•æœå°‹å®šä½ã€‚ä½¿ç”¨è€…å¿…é ˆç”¨è‚‰çœ¼åœ¨å¤§é‡ log ä¸­æ‰¾åˆ°ç›®æ¨™è¡Œã€‚",
      "solution": {
        "description": "åœ¨çµ‚ç«¯ header bar ä¸‹æ–¹æ–°å¢å¯éš±è—çš„æœå°‹åˆ—ï¼ŒCtrl+F é–‹å•Ÿï¼ŒESC é—œé–‰ã€‚æ”¯æ´æ–‡å­—æœå°‹å’Œæ­£å‰‡è¡¨é”å¼ï¼Œå¯ä¸Šä¸‹è·³è½‰åŒ¹é…é …ã€‚",
        "behavior": [
          "æ–°å¢ property bool searchBarVisible: false",
          "æ–°å¢ property string searchQuery: ''",
          "æ–°å¢ property bool searchRegex: false",
          "æ–°å¢ property int searchCurrentIndex: 0",
          "æ–°å¢ property var searchMatches: [] (å­˜å„²åŒ¹é…çš„ terminalModel index)",
          "Ctrl+F é–‹å•Ÿæœå°‹åˆ—ä¸¦èšç„¦è¼¸å…¥æ¡†",
          "ESC é—œé–‰æœå°‹åˆ—ä¸¦æ¸…é™¤æœå°‹é«˜äº®",
          "è¼¸å…¥æ–‡å­—æ™‚å³æ™‚æœå°‹ï¼ˆdebounce 150msï¼‰ï¼Œæ›´æ–° searchMatches",
          "Enter æˆ–é»æ“Š â–¼ è·³åˆ°ä¸‹ä¸€å€‹åŒ¹é…é …ï¼ŒShift+Enter æˆ– â–² è·³åˆ°ä¸Šä¸€å€‹",
          "è·³è½‰æ™‚ ListView.positionViewAtIndex(index, ListView.Center)",
          "åŒ¹é…é …åœ¨ delegate ä¸­åŠ ä¸Šé¡å¤–çš„èƒŒæ™¯é«˜äº®ï¼ˆèˆ‡ keyword highlight ä¸åŒè‰²ï¼‰",
          "æœå°‹é–‹å•Ÿæ™‚è‡ªå‹•æš«åœ autoScrollï¼Œé—œé–‰æ™‚æ¢å¾©",
          "æœå°‹åˆ—å³å´é¡¯ç¤º '3/47' æ ¼å¼çš„åŒ¹é…è¨ˆæ•¸"
        ],
        "layout": {
          "position": "åœ¨ terminal_header (line 1050) å’Œ terminal_view (line 1126) ä¹‹é–“æ’å…¥",
          "height": "36pxï¼ˆéš±è—æ™‚ 0pxï¼Œä½¿ç”¨ Behavior on height å‹•ç•«ï¼‰",
          "structure": "RowLayout: [ğŸ” icon] [CyberTextField æœå°‹è¼¸å…¥æ¡†] [.*  regex toggle] [â–² ä¸Šä¸€å€‹] [â–¼ ä¸‹ä¸€å€‹] [3/47 è¨ˆæ•¸] [âœ• é—œé–‰]"
        },
        "search_highlight_color": {
          "current_match": "rgba(255, 170, 0, 0.35)",
          "other_matches": "rgba(255, 170, 0, 0.12)"
        },
        "affected_code": {
          "main.qml": [
            "Line 134-144: Add Ctrl+F shortcut",
            "Line 1045-1047: Insert search bar Row between header and terminal view in ColumnLayout",
            "Line 1154-1249: entryDelegate â€” add search match background layer",
            "New function: performSearch(query, regex) â€” iterate terminalModel, build searchMatches array",
            "New function: jumpToMatch(direction) â€” navigate searchMatches, scroll ListView"
          ]
        }
      }
    },

    {
      "id": "CH-03",
      "title": "Log è‡ªå‹•å­˜æª”åˆ°æª”æ¡ˆ",
      "priority": "P0",
      "category": "data_persistence",
      "problem": "é•·æ™‚é–“ç›£æ§æ™‚å¦‚æœ app æ„å¤–é—œé–‰æˆ–ç•¶æ©Ÿï¼Œæ‰€æœ‰æ”¶é›†åˆ°çš„ log å…¨éƒ¨éºå¤±ã€‚ç›®å‰åªæœ‰ COPY LOG åˆ°å‰ªè²¼ç°¿çš„åŠŸèƒ½ï¼Œä¸é©åˆå¤§é‡è³‡æ–™ã€‚",
      "solution": {
        "description": "æ–°å¢ Log to File åŠŸèƒ½ï¼Œæ”¯æ´æ‰‹å‹•é–‹å§‹/åœæ­¢éŒ„è£½ï¼Œå°‡æ”¶åˆ°çš„ log å³æ™‚å¯«å…¥æª”æ¡ˆã€‚éœ€è¦ C++ å¾Œç«¯æ–°å¢ FileLogger é¡åˆ¥ã€‚",
        "qml_changes": [
          "åœ¨ left panel ACTIONS å€æ®µæ–°å¢ LOG TO FILE æŒ‰éˆ•",
          "éŒ„è£½ä¸­æ™‚æŒ‰éˆ•è®Šç‚º STOP LOGGINGï¼Œé¡è‰²è®Šç‚º destructive red",
          "ç‹€æ…‹æ¬„æ–°å¢ 'â— REC' æŒ‡ç¤ºå™¨ï¼ˆç´…è‰²åœ“é» + è„ˆå‹•å‹•ç•«ï¼‰ï¼ŒéŒ„è£½ä¸­æ‰é¡¯ç¤º",
          "ç‹€æ…‹æ¬„é¡¯ç¤ºéŒ„è£½æª”æ¡ˆå¤§å°ï¼ˆå¦‚ 'REC: 2.3 MB'ï¼‰",
          "æ”¶åˆé¢æ¿æ™‚åœ–ç¤ºåˆ—ä¹Ÿè¦é¡¯ç¤ºéŒ„è£½ç‹€æ…‹",
          "ç¬¬ä¸€æ¬¡é»æ“Šæ™‚é–‹å•Ÿ FileDialog é¸æ“‡å­˜æª”è·¯å¾‘",
          "æ”¯æ´è‡ªå‹•å‘½åï¼šUARTPRO_YYYYMMDD_HHmmss.log"
        ],
        "cpp_changes": {
          "new_class": "FileLogger (æˆ–æ“´å±• SerialPortManager)",
          "methods": [
            "Q_INVOKABLE bool startLogging(const QString &filePath)",
            "Q_INVOKABLE void stopLogging()",
            "Q_INVOKABLE bool isLogging() const",
            "Q_INVOKABLE qint64 logFileSize() const"
          ],
          "properties": [
            "Q_PROPERTY(bool logging READ isLogging NOTIFY loggingChanged)",
            "Q_PROPERTY(qint64 logFileSize READ logFileSize NOTIFY logFileSizeChanged)"
          ],
          "behavior": [
            "ä½¿ç”¨ QFile ä»¥ append æ¨¡å¼å¯«å…¥",
            "æ¯è¡Œæ ¼å¼ï¼š[timestamp] TYPE> message",
            "ä½¿ç”¨ QTextStream ä¸¦è¨­å®š autoFlush æˆ–å®šæœŸ flushï¼ˆæ¯ 1 ç§’æˆ–æ¯ 100 è¡Œï¼‰",
            "éœ€è¦ import QtQuick.Dialogs åœ¨ QML ä¸­ä½¿ç”¨ FileDialog"
          ]
        },
        "affected_code": {
          "main.qml": [
            "Line 999-1028: ACTIONS section â€” add LOG TO FILE button",
            "Line 1348-1416: Status bar â€” add REC indicator",
            "Line 1538-1556: addTerminalEntry() â€” also write to file if logging"
          ],
          "SerialPortManager.h": "Add logging methods or create new FileLogger class",
          "SerialPortManager.cpp": "Implement file writing logic",
          "CMakeLists.txt": "Add QtQuick.Dialogs if not present"
        }
      }
    },

    {
      "id": "CH-04",
      "title": "æš«åœæ»¾å‹•æµ®å‹•æç¤ºæ¢",
      "priority": "P1",
      "category": "ux_feedback",
      "problem": "ç•¶ä½¿ç”¨è€…æ‰‹å‹•å¾€ä¸Šæ»¾å‹•æŸ¥çœ‹æ­·å² log æ™‚ï¼Œå¦‚æœæœ‰æ–°è³‡æ–™é€²ä¾†ï¼ˆautoScroll å·²é–‹å•Ÿï¼‰ï¼Œç•«é¢æœƒè¢«å¼·åˆ¶æ‹‰åˆ°æœ€åº•éƒ¨ã€‚ä½¿ç”¨è€…å¿…é ˆæ‰‹å‹•å»å·¦å´é¢æ¿å–æ¶ˆ AUTO SCROLL checkboxï¼Œæ“ä½œä¸ç›´è¦ºã€‚",
      "solution": {
        "description": "ä½¿ç”¨è€…æ‰‹å‹•æ»¾å‹•æ™‚è‡ªå‹•æš«åœ autoScrollï¼Œä¸¦åœ¨çµ‚ç«¯å€åº•éƒ¨é¡¯ç¤ºæµ®å‹•æç¤ºæ¢ï¼Œæä¾›ä¸€éµè·³å›æœ€æ–°çš„æŒ‰éˆ•ã€‚",
        "behavior": [
          "ç›£è½ terminalView çš„ onMovementStarted / onFlickStarted â€” å¦‚æœæ˜¯ä½¿ç”¨è€…ä¸»å‹•æ“ä½œï¼ˆéç¨‹å¼è§¸ç™¼ï¼‰ï¼Œè¨­ autoScroll = false",
          "æ›´ç²¾ç¢ºçš„åˆ¤æ–·ï¼šå¦‚æœ terminalView.atYEnd ç‚º false ä¸”ä½¿ç”¨è€…æœ‰æ‹–æ›³/æ»¾è¼ªæ“ä½œï¼Œæ‰æš«åœ",
          "æš«åœæ™‚åœ¨çµ‚ç«¯å€åº•éƒ¨æµ®å‹•é¡¯ç¤ºæç¤ºæ¢ï¼ˆoverlay, z: 5ï¼‰",
          "æç¤ºæ¢å…§å®¹ï¼š'â¸ AUTO-SCROLL PAUSED  [â†“ JUMP TO LATEST]'",
          "é»æ“Š JUMP TO LATESTï¼šautoScroll = trueï¼ŒpositionViewAtEnd()ï¼Œéš±è—æç¤ºæ¢",
          "å¦‚æœä½¿ç”¨è€…æ‰‹å‹•æ»¾åˆ°æœ€åº•éƒ¨ï¼ˆatYEnd === trueï¼‰ï¼Œè‡ªå‹•æ¢å¾© autoScroll = true",
          "æç¤ºæ¢ä½¿ç”¨ opacity animation æ·¡å…¥æ·¡å‡º",
          "å·¦å´é¢æ¿çš„ AUTO SCROLL checkbox ç‹€æ…‹ä¿æŒåŒæ­¥"
        ],
        "layout": {
          "position": "çµ‚ç«¯ ListView å€åŸŸåº•éƒ¨ï¼Œabsolute positioned overlay",
          "style": {
            "height": "32px",
            "background": "colorCard with 90% opacity",
            "border_top": "1px colorAccent",
            "text_color": "colorAccentTertiary",
            "button_color": "colorAccent"
          }
        },
        "affected_code": {
          "main.qml": [
            "Line 1126-1278: terminal output Item â€” add overlay Rectangle inside, anchored to bottom",
            "Line 1132-1138: ListView â€” add onMovementStarted handler, add atYEnd watcher",
            "Line 758-762: AUTO SCROLL checkbox â€” ensure bidirectional binding"
          ]
        }
      }
    },

    {
      "id": "CH-05",
      "title": "ç·©è¡å€å¤§å°é™åˆ¶èˆ‡è¨˜æ†¶é«”ç®¡ç†",
      "priority": "P1",
      "category": "stability",
      "problem": "terminalEntries é™£åˆ—å’Œ terminalModel ç„¡é™å¢é•·ã€‚é•·æ™‚é–“é‹è¡Œï¼ˆå¦‚ 921600 baudï¼Œæ¯ç§’æ•¸ç™¾è¡Œï¼‰ï¼Œæ•¸å°æ™‚å¾Œè¨˜æ†¶é«”ä½”ç”¨éé«˜ï¼ŒUI æœƒè®Šå¾—å¡é “ï¼ˆListView delegate å›æ”¶æ•ˆç‡ä¸‹é™ï¼‰ã€‚",
      "solution": {
        "description": "æ–°å¢æœ€å¤§è¡Œæ•¸é™åˆ¶ï¼ŒFIFO æ–¹å¼ç§»é™¤èˆŠæ¢ç›®ã€‚åœ¨ OPTIONS å€æä¾›è¨­å®šï¼Œç‹€æ…‹æ¬„é¡¯ç¤ºç•¶å‰/ä¸Šé™ã€‚",
        "behavior": [
          "æ–°å¢ property int maxBufferLines: 50000",
          "æ–°å¢ property var bufferSizeOptions: [10000, 50000, 100000, 500000]",
          "åœ¨ addTerminalEntry() ä¸­æª¢æŸ¥ï¼šå¦‚æœ terminalEntries.length > maxBufferLinesï¼Œç§»é™¤æœ€èˆŠçš„ 10% æ¢ç›®ï¼ˆæ‰¹æ¬¡ç§»é™¤é¿å…é »ç¹æ“ä½œï¼‰",
          "ç§»é™¤æ™‚åŒæ­¥æ›´æ–° terminalModelï¼ˆremove å°æ‡‰çš„ model itemsï¼‰",
          "ç§»é™¤æ™‚æ›´æ–° selectedSetï¼ˆç§»é™¤å·²åˆªé™¤æ¢ç›®çš„ selectionï¼‰",
          "ç‹€æ…‹æ¬„é¡¯ç¤º 'BUF: 45000/50000'",
          "åœ¨ OPTIONS å€æ®µæ–°å¢ BUFFER SIZE ä¸‹æ‹‰é¸å–®ï¼ˆCyberComboBoxï¼‰",
          "æ¥è¿‘ä¸Šé™æ™‚ï¼ˆ>90%ï¼‰ç‹€æ…‹æ¬„çš„ BUF æŒ‡ç¤ºå™¨è®Šç‚ºè­¦å‘Šè‰² (amber)"
        ],
        "affected_code": {
          "main.qml": [
            "Line 103-107: App State â€” add maxBufferLines property",
            "Line 1538-1556: addTerminalEntry() â€” add buffer limit check and trimming logic",
            "Line 741-770: OPTIONS section â€” add BUFFER SIZE combo",
            "Line 1348-1416: Status bar â€” add BUF indicator"
          ]
        }
      }
    },

    {
      "id": "CH-06",
      "title": "è¨Šæ¯é¡å‹å¿«é€Ÿç¯©é¸æŒ‰éˆ• (RX/TX/SYS/ERR)",
      "priority": "P1",
      "category": "filtering",
      "problem": "ç›®å‰è¨Šæ¯æœ‰ 4 ç¨®é¡å‹å‰ç¶´ï¼ˆRX/TX/SYS/ERRï¼‰ï¼Œä½†æ²’æœ‰å¿«é€Ÿç¯©é¸æ©Ÿåˆ¶ã€‚åˆ†ææ™‚ç¶“å¸¸åªéœ€è¦çœ‹ RX é¡å‹ï¼Œæˆ–æƒ³æ’é™¤ SYS è¨Šæ¯ï¼Œå»å¿…é ˆç”¨é»‘åå–®æ‰‹å‹•è¼¸å…¥å‰ç¶´ã€‚",
      "solution": {
        "description": "åœ¨çµ‚ç«¯ header bar ä¸­åŠ å…¥ 4 å€‹ toggle æŒ‰éˆ•ï¼Œåˆ†åˆ¥æ§åˆ¶ RX/TX/SYS/ERR é¡å‹çš„é¡¯ç¤º/éš±è—ã€‚",
        "behavior": [
          "æ–°å¢ property bool showRx: true",
          "æ–°å¢ property bool showTx: true",
          "æ–°å¢ property bool showSys: true",
          "æ–°å¢ property bool showErr: true",
          "4 å€‹å°å‹ toggle æŒ‰éˆ•æ”¾åœ¨ terminal_header çš„ traffic lights ä¹‹å¾Œ",
          "æŒ‰éˆ•æ¨£å¼ï¼šå•Ÿç”¨æ™‚é¡¯ç¤ºå°æ‡‰é¡è‰²æ–‡å­— + åº•ç·šï¼›åœç”¨æ™‚ç°è‰²æ–‡å­—",
          "RX: colorAccent (#00ff88), TX: colorAccentTertiary (#00d4ff), SYS: colorAccentSecondary (#ff00ff), ERR: colorDestructive (#ff3366)",
          "åˆ‡æ›ä»»ä¸€æŒ‰éˆ•æ™‚å‘¼å« rebuildFilteredModel()",
          "ä¿®æ”¹ passesFilter() â€” åœ¨ç™½/é»‘åå–®åˆ¤æ–·å‰å…ˆæª¢æŸ¥ type filter",
          "header çµ±è¨ˆçš„ FILTERED è¨ˆæ•¸è¦åŒ…å« type filter çš„å½±éŸ¿"
        ],
        "layout": {
          "position": "terminal_header RowLayout ä¸­ï¼Œtraffic lights å³å´ã€// TERMINAL OUTPUT æ¨™é¡Œå·¦å´",
          "button_style": {
            "width": "auto (text width + 12px padding)",
            "height": "22px",
            "font_size": "9px",
            "font_family": "Consolas",
            "letter_spacing": "1px",
            "border_radius": "2px",
            "active": "background: type color with 20% opacity, text: type color, border-bottom: 2px solid type color",
            "inactive": "background: transparent, text: colorMutedFg 50% opacity, no border"
          }
        },
        "affected_code": {
          "main.qml": [
            "Line 103-107: App State â€” add showRx/showTx/showSys/showErr properties",
            "Line 1055-1120: terminal header RowLayout â€” insert 4 toggle buttons after traffic lights",
            "Line 1558-1584: passesFilter() â€” add type check as first filter condition",
            "Line 1586-1597: rebuildFilteredModel() â€” already handles full rebuild, just needs passesFilter update"
          ]
        }
      }
    },

    {
      "id": "CH-07",
      "title": "ç¯©é¸å·¥å…·åˆ—æ•´åˆè‡³çµ‚ç«¯å€ä¸Šæ–¹",
      "priority": "P2",
      "category": "layout",
      "problem": "Keywordsã€Whitelistã€Blacklist åˆ†æ•£åœ¨å·¦å´é¢æ¿ï¼Œæ¯å€‹å€æ®µå„ä½”ä¸€å¤§æ®µå‚ç›´ç©ºé–“ï¼ˆè¼¸å…¥æ¡† + åˆ—è¡¨ + åˆªé™¤æŒ‰éˆ•ï¼‰ã€‚æ“ä½œæµç¨‹ï¼šå·¦å´è¼¸å…¥ â†’ çœ‹å³å´çµæœ â†’ å·¦å´èª¿æ•´ï¼Œè¦–ç·šä¾†å›è·³å‹•ä¸ç›´è¦ºã€‚",
      "solution": {
        "description": "å°‡ç¯©é¸åŠŸèƒ½æ•´åˆåˆ°çµ‚ç«¯å€ä¸Šæ–¹çš„å·¥å…·åˆ—ï¼Œä½¿ç”¨ tag/chip æ–¹å¼æ°´å¹³æ’åˆ—æ‰€æœ‰ç¯©é¸æ¢ä»¶ã€‚å·¦å´é¢æ¿ä¿ç•™ CONNECTION å’Œ OPTIONSï¼Œç§»é™¤ KEYWORDS/WHITELIST/BLACKLIST/ACTIONSã€‚",
        "behavior": [
          "åœ¨ terminal_header ä¸‹æ–¹æ–°å¢ filter toolbarï¼ˆå¯æŠ˜ç–Šï¼Œé è¨­å±•é–‹ï¼‰",
          "filter toolbar åŒ…å«ï¼šçµ±ä¸€çš„è¼¸å…¥æ¡† + é¡å‹é¸æ“‡ä¸‹æ‹‰ï¼ˆHighlight / Whitelist / Blacklistï¼‰+ æ–°å¢æŒ‰éˆ•",
          "æ‰€æœ‰å·²æ–°å¢çš„ç¯©é¸æ¢ä»¶ä»¥ tag/chip æ–¹å¼æ©«å‘æ’åˆ—ï¼ˆFlow layoutï¼‰ï¼Œä½¿ç”¨ Flow {} å…ƒä»¶",
          "æ¯å€‹ chip é¡¯ç¤ºï¼šé¡è‰²æ¨™è¨˜ + æ–‡å­— + âœ• åˆªé™¤æŒ‰éˆ•",
          "chip é¡è‰²å€åˆ†ï¼šå½©è‰²é‚Šæ¡†/èƒŒæ™¯=Highlightï¼ˆä½¿ç”¨ kwPalette é¡è‰²ï¼‰ï¼Œç¶ è‰²=Whitelistï¼Œç´…è‰²=Blacklist",
          "chip æ”¯æ´æ‹–æ›³é‡æ–°æ’åºï¼ˆå¯é¸ï¼ŒP3ï¼‰",
          "å¦‚æœ chip éå¤šè¶…å‡ºä¸€è¡Œï¼Œé¡¯ç¤ºç¬¬äºŒè¡Œï¼ˆFlow è‡ªå‹•æ›è¡Œï¼‰ï¼Œæœ€å¤§é«˜åº¦ 3 è¡Œå¾ŒåŠ  scroll",
          "å·¦å´é¢æ¿çš„ KEYWORDS/WHITELIST/BLACKLIST/ACTIONS å€æ®µç§»é™¤ï¼Œå·¦å´é¢æ¿åªå‰© CONNECTION + OPTIONS",
          "ACTIONS çš„æŒ‰éˆ•ï¼ˆREFRESH PORTS / COPY LOG / CLEAR TERMINALï¼‰æ¬åˆ°ï¼šREFRESH PORTS ç•™åœ¨ CONNECTION å€æ®µï¼ŒCOPY LOG å’Œ CLEAR TERMINAL ç§»åˆ°å³éµé¸å–®ï¼ˆå·²å­˜åœ¨ï¼‰æˆ– terminal header"
        ],
        "layout": {
          "position": "åœ¨ type filter buttons (CH-06) çš„åŒä¸€è¡Œæˆ–ä¸‹æ–¹ç¨ç«‹è¡Œ",
          "structure": [
            "Row 1 (terminal_header): [traffic lights] [RX][TX][SYS][ERR] [// TERMINAL] ... [stats]",
            "Row 2 (filter_toolbar, ~36px): [Filter: ___input___] [â–¾ Type] [+ Add] | chips: [error âœ•] [warn âœ•] [+kernel âœ•] [-debug âœ•]",
            "Row 3+ (chip overflow, åªåœ¨éœ€è¦æ™‚å±•é–‹): æ›´å¤š chips..."
          ],
          "chip_style": {
            "height": "22px",
            "padding": "4px 8px",
            "border_radius": "3px",
            "font_size": "10px",
            "highlight_chip": "border: 1px solid kwColor, background: kwColor 15% opacity, text: kwColor",
            "whitelist_chip": "border: 1px solid colorAccent, background: colorAccent 15% opacity, prefix: '+', text: colorAccent",
            "blacklist_chip": "border: 1px solid colorDestructive, background: colorDestructive 15% opacity, prefix: 'âˆ’', text: colorDestructive"
          }
        },
        "affected_code": {
          "main.qml": [
            "Line 777-992: KEYWORDS / WHITELIST / BLACKLIST sections â€” REMOVE from left panel",
            "Line 999-1028: ACTIONS section â€” REMOVE, redistribute buttons",
            "Line 1045-1047: Right panel ColumnLayout â€” insert filter toolbar between header and ListView",
            "Line 1725-1750: addKeyword/addWhitelist/addBlacklist functions â€” keep logic, update UI references"
          ]
        }
      }
    },

    {
      "id": "CH-08",
      "title": "æ™‚é–“ç¯„åœç¯©é¸",
      "priority": "P2",
      "category": "filtering",
      "problem": "é•·æ™‚é–“ç›£æ§å¾Œç´¯ç©å¤§é‡ logï¼Œåˆ†ææ™‚ç¶“å¸¸åªéœ€è¦çœ‹æœ€è¿‘ä¸€æ®µæ™‚é–“çš„è³‡æ–™ï¼Œä½†ç›®å‰æ²’æœ‰æ™‚é–“ç¶­åº¦çš„ç¯©é¸æ–¹å¼ã€‚",
      "solution": {
        "description": "æ–°å¢æ™‚é–“ç¯„åœéæ¿¾å™¨ï¼Œå¯å¿«é€Ÿé¸æ“‡é è¨­æ™‚é–“ç¯„åœæˆ–è‡ªè¨‚ç¯„åœã€‚",
        "behavior": [
          "åœ¨ filter toolbar æˆ– terminal header æ–°å¢æ™‚é–“ç¯„åœé¸æ“‡å™¨",
          "é è¨­é¸é …ï¼šALL / 1 MIN / 5 MIN / 15 MIN / 30 MIN / 1 HR / CUSTOM",
          "é¸æ“‡é ALL æ™‚ï¼ŒpassesFilter() é¡å¤–æª¢æŸ¥ entry.timestamp æ˜¯å¦åœ¨æ™‚é–“ç¯„åœå…§",
          "éœ€è¦åœ¨ terminalEntries ä¸­å­˜å„² Date ç‰©ä»¶ï¼ˆç›®å‰åªå­˜ timestamp å­—ä¸²ï¼‰ï¼Œæˆ–æ–°å¢ property var epochMs åˆ° entry",
          "CUSTOM ç¯„åœï¼šå½ˆå‡ºå°é¢æ¿è®“ä½¿ç”¨è€…è¼¸å…¥èµ·å§‹/çµæŸæ™‚é–“",
          "æ™‚é–“ç¯„åœå•Ÿç”¨æ™‚ï¼Œheader é¡¯ç¤º '[TIMERANGE: LAST 5 MIN]' æ¨™ç±¤",
          "æ–° log é€²å…¥æ™‚ï¼Œå¦‚æœè¶…å‡ºæ™‚é–“ç¯„åœæœƒè¢«è‡ªå‹•ç¯©é™¤ï¼ˆä½†ä»ä¿ç•™åœ¨ terminalEntries ä¸­ï¼‰"
        ],
        "data_model_change": {
          "entry_object": {
            "current": "{ timestamp: 'HH:mm:ss.zzz', msgText, hexData, type, entryIndex }",
            "proposed": "{ timestamp: 'HH:mm:ss.zzz', epochMs: Date.now(), msgText, hexData, type, entryIndex }"
          }
        },
        "affected_code": {
          "main.qml": [
            "Line 1538-1545: addTerminalEntry() â€” add epochMs to entry object",
            "Line 1558-1584: passesFilter() â€” add time range check",
            "Line 1055-1120 or filter toolbar: add time range selector UI"
          ]
        }
      }
    },

    {
      "id": "CH-09",
      "title": "åŒ¯å‡ºç¯©é¸çµæœ",
      "priority": "P2",
      "category": "data_export",
      "problem": "ç›®å‰åªèƒ½ COPY ALL åˆ°å‰ªè²¼ç°¿ï¼Œä½†å¤§é‡ log æ”¾å‰ªè²¼ç°¿ä¸å¯¦ç”¨ã€‚ä¹Ÿç„¡æ³•åªåŒ¯å‡ºç¯©é¸å¾Œçš„çµæœã€‚",
      "solution": {
        "description": "æ–°å¢åŒ¯å‡ºåŠŸèƒ½ï¼Œæ”¯æ´åŒ¯å‡ºç›®å‰ç¯©é¸çµæœåˆ°æª”æ¡ˆï¼Œæ”¯æ´å¤šç¨®æ ¼å¼ã€‚",
        "behavior": [
          "åœ¨å³éµé¸å–®æ–°å¢ 'EXPORT FILTERED...' å’Œ 'EXPORT ALL...' é¸é …",
          "æˆ–åœ¨ terminal header æ–°å¢åŒ¯å‡ºæŒ‰éˆ•ï¼ˆâ†“ åœ–ç¤ºï¼‰",
          "é–‹å•Ÿ FileDialog é¸æ“‡å­˜æª”è·¯å¾‘",
          "åŒ¯å‡ºæ ¼å¼é¸æ“‡ï¼šPlain Text (.log/.txt) æˆ– CSV (.csv)",
          "Plain Text æ ¼å¼ï¼šèˆ‡ç›®å‰ copyAllEntries() ç›¸åŒæ ¼å¼ï¼Œä¸€è¡Œä¸€å€‹ entry",
          "CSV æ ¼å¼ï¼štimestamp, type, message, hex_data",
          "åŒ¯å‡ºå®Œæˆå¾Œåœ¨çµ‚ç«¯é¡¯ç¤º SYS è¨Šæ¯ï¼š'Exported N entries to /path/to/file'"
        ],
        "affected_code": {
          "main.qml": [
            "Line 201-277: context menu â€” add EXPORT options",
            "New function: exportEntries(filtered, format, filePath)"
          ],
          "cpp_backend": "Add file writing Q_INVOKABLE or use Qt.labs.platform FileDialog + JS file writing"
        }
      }
    },

    {
      "id": "CH-10",
      "title": "æ¨™é¡Œæ¬„ç²¾ç°¡ â€” é€£ç·šè³‡è¨Šä¸Šæ",
      "priority": "P2",
      "category": "layout",
      "problem": "æ¨™é¡Œæ¬„ç›®å‰ç”¨ 260px é¡¯ç¤º UART PRO glitch å‹•ç•«æ¨™é¡Œï¼Œè¦–è¦ºæ•ˆæœé…·ä½†è³‡è¨Šå¯†åº¦ä½ã€‚é€£ç·šç‹€æ…‹åªæœ‰ä¸€å€‹å°åœ“é»ï¼Œä¸å¤ é¡¯çœ¼ã€‚",
      "solution": {
        "description": "ç²¾ç°¡æ¨™é¡Œæ¬„ï¼Œå°‡é€£ç·šè³‡è¨Šæå‡åˆ°æ¨™é¡Œæ¬„ä¸­ï¼Œè®“æœ€é‡è¦çš„ç‹€æ…‹ä¸€ç›®äº†ç„¶ã€‚",
        "behavior": [
          "æ¨™é¡Œå€åŸŸç¸®å°ï¼šUART PRO æ–‡å­—ä¿ç•™ä½†ç¸®å° glitch å‹•ç•«å¹…åº¦ï¼Œå¯¬åº¦å¾ 260px æ¸›åˆ° 160px",
          "æ¨™é¡Œå³å´ç›´æ¥é¡¯ç¤ºé€£ç·šæ‘˜è¦ï¼š'COM3 @ 921600' æˆ– '---'ï¼ˆå–ä»£æˆ–è£œå……ç›®å‰çš„å°åœ“é»ï¼‰",
          "å¦‚æœå´é‚Šé¢æ¿æ”¶åˆï¼Œæ¨™é¡Œæ¬„é¡å¤–é¡¯ç¤º RX/TX bytesï¼ˆå¾ç‹€æ…‹æ¬„è¤‡è£½é—œéµè³‡è¨Šåˆ°æ˜“è¦‹ä½ç½®ï¼‰",
          "é€£ç·šç‹€æ…‹æŒ‡ç¤ºå™¨ç¶­æŒè„ˆå‹•å‹•ç•«ä½†æ”¾å¤§é»çš„å°ºå¯¸ï¼ˆ8px â†’ 10pxï¼‰"
        ],
        "affected_code": {
          "main.qml": [
            "Line 314-378: Glitch title + subtitle â€” reduce width",
            "Line 413-437: Connection indicator â€” enhance with port info text"
          ]
        }
      }
    },

    {
      "id": "CH-11",
      "title": "çµ‚ç«¯å­—é«”å¤§å°å¯èª¿æ•´",
      "priority": "P2",
      "category": "ux_comfort",
      "problem": "çµ‚ç«¯å­—é«”å›ºå®š 12pxï¼Œé•·æ™‚é–“ç›£çœ‹å°å­—çœ¼ç›ç–²å‹ï¼Œä½†èª¿å¤§åˆæœƒé™ä½å¯è¦–è¡Œæ•¸ã€‚ä¸åŒä½¿ç”¨è€…/è¢å¹•å°ºå¯¸éœ€æ±‚ä¸åŒã€‚",
      "solution": {
        "description": "æ”¯æ´ Ctrl+æ»¾è¼ªæˆ– Ctrl+/Ctrl- èª¿æ•´çµ‚ç«¯å­—é«”å¤§å°ã€‚",
        "behavior": [
          "æ–°å¢ property int terminalFontSize: 12",
          "æ–°å¢ property int minFontSize: 8",
          "æ–°å¢ property int maxFontSize: 24",
          "Ctrl+= (Ctrl+Plus): terminalFontSize += 1",
          "Ctrl+- (Ctrl+Minus): terminalFontSize -= 1",
          "Ctrl+0: terminalFontSize = 12 (é‡è¨­)",
          "Ctrl+æ»¾è¼ªï¼šåŒä¸Šï¼ˆåœ¨ terminalView çš„ MouseArea ä¸­æ””æˆª wheel + Ctrlï¼‰",
          "delegate ä¸­çš„ font.pixelSize ç¶å®šåˆ° terminalFontSize",
          "ç‹€æ…‹æ¬„æˆ– terminal header é¡¯ç¤ºç›®å‰å­—é«”å¤§å°ï¼ˆéé è¨­å€¼æ™‚ï¼‰"
        ],
        "affected_code": {
          "main.qml": [
            "Line 103-107: App State â€” add terminalFontSize property",
            "Line 134-144: Shortcuts â€” add Ctrl+=/Ctrl+-/Ctrl+0",
            "Line 1196-1227: delegate Text elements â€” bind font.pixelSize to terminalFontSize",
            "Line 1230-1248: delegate MouseArea â€” add onWheel handler for Ctrl+Wheel"
          ]
        }
      }
    },

    {
      "id": "CH-12",
      "title": "è¡Œè™Ÿé¡¯ç¤º",
      "priority": "P3",
      "category": "ux_detail",
      "problem": "åˆ†æ log æ™‚ç¶“å¸¸éœ€è¦åƒç…§è¡Œè™Ÿï¼ˆä¾‹å¦‚ï¼š'çœ‹ç¬¬ 1234 è¡Œé™„è¿‘'ï¼‰ï¼Œç›®å‰æ²’æœ‰è¡Œè™Ÿã€‚",
      "solution": {
        "description": "åœ¨çµ‚ç«¯ delegate ä¸­æ–°å¢å¯é¸çš„è¡Œè™Ÿæ¬„ä½ã€‚",
        "behavior": [
          "æ–°å¢ property bool showLineNumbers: false",
          "åœ¨ OPTIONS å€æ–°å¢ LINE NUMBERS checkbox",
          "è¡Œè™Ÿé¡¯ç¤ºåœ¨ timestamp ä¹‹å‰ï¼ˆæœ€å·¦å´ï¼‰ï¼Œå›ºå®šå¯¬åº¦",
          "è¡Œè™Ÿé¡è‰²ï¼šcolorMutedFg 50% opacity",
          "è¡Œè™Ÿæ ¼å¼ï¼šæ ¹æ“šç¸½è¡Œæ•¸è‡ªå‹•èª¿æ•´ä½æ•¸ï¼ˆå¦‚ 1-999 ç”¨ 3 ä½ï¼Œ1000-9999 ç”¨ 4 ä½ï¼‰",
          "è¡Œè™Ÿä½¿ç”¨ entryIndexï¼ˆå…¨åŸŸç´¢å¼•ï¼‰ï¼Œé model index"
        ],
        "affected_code": {
          "main.qml": [
            "Line 1189-1228: delegate Row â€” add line number Text before timestamp"
          ]
        }
      }
    },

    {
      "id": "CH-13",
      "title": "å¤šæ¢ä»¶è¤‡åˆç¯©é¸å¿«æ·æ“ä½œ",
      "priority": "P3",
      "category": "filtering",
      "problem": "æ¯æ¬¡è¦æ–°å¢ç¯©é¸æ¢ä»¶éœ€è¦ï¼š1) åœ¨è¼¸å…¥æ¡†æ‰“å­— 2) æŒ‰ + æŒ‰éˆ• 3) ç­‰å¾…é‡å»ºã€‚æƒ³å¾ log ä¸­ç›´æ¥å³éµåŠ å…¥ç¯©é¸æ›´ç›´è¦ºã€‚",
      "solution": {
        "description": "æ”¯æ´å¾çµ‚ç«¯ä¸­é¸å–æ–‡å­—å¾Œå³éµå¿«é€ŸåŠ å…¥ç¯©é¸æ¢ä»¶ã€‚",
        "behavior": [
          "å³éµé¸å–®æ–°å¢å­é¸å–®ï¼š'ADD TO FILTER >'",
          "å­é¸å–®é …ç›®ï¼š'+ As Highlight' / '+ As Whitelist' / '+ As Blacklist'",
          "å¦‚æœæœ‰é¸å–æ–‡å­—ï¼ˆtext selectionï¼‰ï¼Œä½¿ç”¨é¸å–çš„æ–‡å­—",
          "å¦‚æœæ²’æœ‰é¸å–æ–‡å­—ï¼Œä½¿ç”¨ç›®å‰è¡Œçš„å®Œæ•´ msgTextï¼ˆæˆ– prompt ä½¿ç”¨è€…è¼¸å…¥ï¼‰",
          "æ³¨æ„ï¼šç›®å‰ delegate ä½¿ç”¨ RichText ä¸æ”¯æ´åŸç”Ÿæ–‡å­—é¸å–ï¼Œå¯ä»¥å…ˆç”¨æ•´è¡ŒåŠ å…¥çš„æ–¹å¼",
          "é€²éšï¼šæ”¯æ´ delegate å…§æ–‡å­—é¸å–ï¼ˆéœ€è¦æ”¹ç”¨ TextEdit æˆ– SelectableTextï¼Œè¤‡é›œåº¦è¼ƒé«˜ï¼Œå¯ P4ï¼‰"
        ],
        "affected_code": {
          "main.qml": [
            "Line 201-277: context menu â€” add submenu items",
            "Line 1230-1248: delegate MouseArea â€” potentially add text selection support"
          ]
        }
      }
    },

    {
      "id": "CH-14",
      "title": "ç¯©é¸æ¢ä»¶æŒä¹…åŒ–ï¼ˆè¨­å®šå­˜å„²ï¼‰",
      "priority": "P3",
      "category": "data_persistence",
      "problem": "æ¯æ¬¡é‡å•Ÿ app æ‰€æœ‰çš„ Keywordsã€Whitelistã€Blacklist éƒ½è¦é‡æ–°è¼¸å…¥ã€‚å¸¸ç”¨çš„ç¯©é¸çµ„åˆç„¡æ³•ä¿å­˜ã€‚",
      "solution": {
        "description": "ä½¿ç”¨ Qt.labs.settings æˆ–è‡ªè¨‚ JSON è¨­å®šæª”æŒä¹…åŒ–ç¯©é¸æ¢ä»¶å’Œæ‡‰ç”¨è¨­å®šã€‚",
        "behavior": [
          "ä½¿ç”¨ Settings { category: 'filters' } å­˜å„² keywords/whitelist/blacklist",
          "ä½¿ç”¨ Settings { category: 'connection' } å­˜å„²ä¸Šæ¬¡çš„é€£ç·šè¨­å®šï¼ˆport, baud, databits, etc.ï¼‰",
          "ä½¿ç”¨ Settings { category: 'ui' } å­˜å„² UI åå¥½ï¼ˆtheme, fontSize, showTimestamp, hexMode, etc.ï¼‰",
          "app å•Ÿå‹•æ™‚è‡ªå‹•è¼‰å…¥ä¸Šæ¬¡çš„è¨­å®š",
          "ç¯©é¸æ¢ä»¶è®Šæ›´æ™‚è‡ªå‹•å­˜å„²ï¼ˆdebounce 1ç§’é¿å…é »ç¹å¯«å…¥ï¼‰",
          "é€²éšï¼šæ”¯æ´ç¯©é¸ presetï¼ˆå‘½åçš„ç¯©é¸çµ„åˆï¼Œå¯å¿«é€Ÿåˆ‡æ›ï¼‰"
        ],
        "affected_code": {
          "main.qml": [
            "Top of file: import Qt.labs.settings",
            "Line 103-117: App state properties â€” bind to Settings",
            "Line 1784-1791: Component.onCompleted â€” load saved settings"
          ]
        }
      }
    }
  ],

  "new_layout_summary": {
    "description": "é‡æ§‹å¾Œçš„æ•´é«”ä½ˆå±€ï¼ˆæ‰€æœ‰è®Šæ›´å®Œæˆå¾Œçš„æœ€çµ‚å½¢æ…‹ï¼‰",
    "ascii_diagram": [
      "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”",
      "â”‚ [â˜°] UART PRO   [COM3 @ 921600 â—]   [CYBER â–¾]   â”€  â–¡  âœ•    â”‚ <- title_bar (52px)",
      "â”œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
      "â”‚ â—  â”‚ [RX][TX][SYS][ERR]  // TERMINAL     [FILTERED] [HEX] N â”‚ <- terminal_header (36px)",
      "â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
      "â”‚ â¸  â”‚ ğŸ” [search input____] [.*] [â–²][â–¼] 3/47         [âœ•]    â”‚ <- search_bar (36px, toggleable)",
      "â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
      "â”‚ âŠ˜  â”‚ Filter: [______] [â–¾Type] [+] | [errâœ•] [warnâœ•] [+kernâœ•] â”‚ <- filter_toolbar (36px)",
      "â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
      "â”‚ â—  â”‚                                                          â”‚",
      "â”‚    â”‚  10:23:45.001  RX>  kernel: boot complete                â”‚",
      "â”‚ 40 â”‚  10:23:45.120  RX>  [error] highlighted content         â”‚ <- terminal_view (fill)",
      "â”‚ px â”‚  10:23:46.300  TX>  AT+COMMAND                          â”‚",
      "â”‚    â”‚  ...                                                     â”‚",
      "â”‚    â”‚                                                          â”‚",
      "â”‚    â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚",
      "â”‚    â”‚            â”‚ â¸ PAUSED  [â†“ JUMP TO LATEST]   â”‚          â”‚ <- scroll_pause_overlay",
      "â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
      "â”‚    â”‚ [HEX] > [send input______________] [CR+LFâ–¾] [TRANSMIT] â”‚ <- send_area (52px)",
      "â”œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
      "â”‚ PORT: COM3 @ 921600 â”‚ RX: 1.2KB â”‚ TX: 0 â”‚ BUF: 45K/50K â”‚â—RECâ”‚ <- status_bar (30px)",
      "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜",
      "",
      "å·¦å´ 40px ç‚ºæ”¶åˆç‹€æ…‹çš„ icon barï¼Œé»æ“Š â˜° å±•é–‹å› 280px é¡¯ç¤º CONNECTION + OPTIONS å®Œæ•´é¢æ¿"
    ],
    "left_panel_expanded": [
      "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”",
      "â”‚ > CONNECTION_         â”‚",
      "â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚",
      "â”‚ PORT:    [COM3 â–¾]     â”‚",
      "â”‚ BAUD:    [921600 â–¾]   â”‚",
      "â”‚ BITS:    [8 â–¾]        â”‚",
      "â”‚ STOP:    [1 â–¾]        â”‚",
      "â”‚ PARITY:  [None â–¾]     â”‚",
      "â”‚ [  DISCONNECT  ]      â”‚",
      "â”‚ [REFRESH PORTS]       â”‚",
      "â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚",
      "â”‚ > OPTIONS              â”‚",
      "â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚",
      "â”‚ â˜ HEX DISPLAY         â”‚",
      "â”‚ â˜‘ TIMESTAMP            â”‚",
      "â”‚ â˜ LINE NUMBERS         â”‚",
      "â”‚ BUFFER: [50000 â–¾]     â”‚",
      "â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚",
      "â”‚ > RECORDING            â”‚",
      "â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚",
      "â”‚ [  LOG TO FILE  ]     â”‚",
      "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
    ]
  },

  "implementation_order": {
    "description": "å»ºè­°å¯¦ä½œé †åºï¼Œè€ƒæ…®ä¾è³´é—œä¿‚å’Œåƒ¹å€¼/è¤‡é›œåº¦æ¯”",
    "phases": [
      {
        "phase": 1,
        "title": "æ ¸å¿ƒç›£æ§é«”é©—",
        "items": ["CH-01", "CH-04", "CH-05"],
        "rationale": "å…ˆè§£æ±ºé•·æ™‚é–“ç›£æ§çš„åŸºæœ¬å•é¡Œï¼šå¯è¦–é¢ç©ã€æš«åœæ»¾å‹•ã€è¨˜æ†¶é«”ç©©å®šæ€§ã€‚é€™ä¸‰é …äº’ç›¸ç¨ç«‹å¯ä¸¦è¡Œé–‹ç™¼ã€‚"
      },
      {
        "phase": 2,
        "title": "æœå°‹èˆ‡ç¯©é¸å¼·åŒ–",
        "items": ["CH-02", "CH-06"],
        "rationale": "æœå°‹åŠŸèƒ½æ˜¯åˆ†æçš„åŸºçŸ³ï¼Œtype filter æ˜¯æœ€ç°¡å–®æœ‰æ•ˆçš„ç¯©é¸å¢å¼·ã€‚CH-02 è¼ƒè¤‡é›œä½†åƒ¹å€¼æœ€é«˜ã€‚"
      },
      {
        "phase": 3,
        "title": "è³‡æ–™æŒä¹…åŒ–",
        "items": ["CH-03", "CH-09"],
        "rationale": "éœ€è¦ C++ å¾Œç«¯æ”¹å‹•ï¼ˆæª”æ¡ˆå¯«å…¥ï¼‰ï¼Œlog to file å’Œ export å¯å…±ç”¨ file writing åŸºç¤å»ºè¨­ã€‚"
      },
      {
        "phase": 4,
        "title": "UI æ•´åˆå„ªåŒ–",
        "items": ["CH-07", "CH-10", "CH-11"],
        "rationale": "ç¯©é¸å·¥å…·åˆ—æ•´åˆæ˜¯è¼ƒå¤§çš„ layout é‡æ§‹ï¼Œéœ€è¦åœ¨å‰é¢çš„åŠŸèƒ½ç©©å®šå¾Œå†é€²è¡Œã€‚å­—é«”èª¿æ•´å’Œæ¨™é¡Œæ¬„ç²¾ç°¡æ˜¯å°æ”¹å‹•ã€‚"
      },
      {
        "phase": 5,
        "title": "é€²éšåŠŸèƒ½",
        "items": ["CH-08", "CH-12", "CH-13", "CH-14"],
        "rationale": "æ™‚é–“ç¯©é¸éœ€è¦ data model è®Šæ›´ï¼Œè¡Œè™Ÿ/å³éµç¯©é¸/è¨­å®šæŒä¹…åŒ–éƒ½æ˜¯åŠ åˆ†é …ã€‚"
      }
    ]
  },

  "new_keyboard_shortcuts": {
    "Ctrl+B": "Toggle side panel collapse/expand",
    "Ctrl+F": "Open search bar",
    "Escape": "Close search bar (when focused)",
    "Ctrl+=": "Increase terminal font size",
    "Ctrl+-": "Decrease terminal font size",
    "Ctrl+0": "Reset terminal font size to default",
    "Enter (in search)": "Jump to next search match",
    "Shift+Enter (in search)": "Jump to previous search match",
    "existing_Ctrl+L": "Clear terminal (keep)",
    "existing_Ctrl+C": "Copy selected (keep)"
  },

  "new_status_bar_items": {
    "layout": "PORT: COM3 @ 921600 | RX: 1.2KB | TX: 0 | BUF: 45K/50K | â— REC 2.3MB | UPTIME: 00:05:23 | UART PRO v0.2",
    "items": [
      { "id": "port_info", "exists": true, "change": "none" },
      { "id": "rx_bytes", "exists": true, "change": "none" },
      { "id": "tx_bytes", "exists": true, "change": "none" },
      { "id": "buffer_usage", "exists": false, "new": true, "format": "BUF: {current}/{max}", "color": "colorMutedFg, amber when >90%" },
      { "id": "recording", "exists": false, "new": true, "format": "â— REC {fileSize}", "color": "colorDestructive with pulse animation", "visible_when": "isLogging === true" },
      { "id": "uptime", "exists": true, "change": "none" },
      { "id": "version", "exists": true, "change": "update to v0.2" }
    ]
  },

  "backend_changes_summary": {
    "SerialPortManager": {
      "new_methods": [],
      "note": "SerialPortManager æœ¬èº«ä¸éœ€è¦å¤§æ”¹ï¼Œä½† reconnecting/connectionLost ä¿¡è™Ÿå·²å®£å‘Šä½†æœªåœ¨ QML ä¸­ä½¿ç”¨ï¼Œå»ºè­°åœ¨ QML ä¸­åŠ å…¥é‡é€£æç¤º UI"
    },
    "new_class_FileLogger": {
      "purpose": "è™•ç† log æª”æ¡ˆå¯«å…¥ï¼ˆCH-03 å’Œ CH-09 å…±ç”¨ï¼‰",
      "methods": [
        "Q_INVOKABLE bool startLogging(const QString &filePath)",
        "Q_INVOKABLE void stopLogging()",
        "Q_INVOKABLE void writeEntry(const QString &timestamp, const QString &type, const QString &message, const QString &hexData)",
        "Q_INVOKABLE bool exportEntries(const QString &filePath, const QString &format, const QVariantList &entries)",
        "Q_INVOKABLE qint64 logFileSize() const"
      ],
      "properties": [
        "Q_PROPERTY(bool logging READ isLogging NOTIFY loggingChanged)",
        "Q_PROPERTY(qint64 logFileSize READ logFileSize NOTIFY logFileSizeChanged)",
        "Q_PROPERTY(QString logFilePath READ logFilePath NOTIFY logFilePathChanged)"
      ],
      "registration": "main.cpp ä¸­ qmlRegisterSingletonType æˆ– setContextProperty"
    }
  },

  "notes_for_developer": [
    "æ‰€æœ‰æ–°å¢ UI å…ƒä»¶å¿…é ˆä½¿ç”¨ç¾æœ‰çš„ CyberButton / CyberCheckBox / CyberComboBox / CyberTextField å…ƒä»¶ï¼Œç¶­æŒ Cyber è¨­è¨ˆèªè¨€ä¸€è‡´æ€§",
    "æ‰€æœ‰é¡è‰²å¿…é ˆä½¿ç”¨ root.colorXxx design tokensï¼Œä¸å¯å¯«æ­»é¡è‰²å€¼ï¼Œä»¥æ”¯æ´ 5 å¥—ä¸»é¡Œåˆ‡æ›",
    "å‹•ç•«ä¸€å¾‹ä½¿ç”¨ Behavior on xxx { NumberAnimation { duration: 150-200; easing.type: Easing.OutCubic } } é¢¨æ ¼",
    "æ–°å¢çš„ filter toolbar å’Œ search bar åœ¨ FLAT/CLAY æ·ºè‰²ä¸»é¡Œä¸‹éœ€ç¢ºèªå°æ¯”åº¦è¶³å¤ ",
    "main.qml å·²ç¶“ 1793 è¡Œï¼Œå»ºè­°å°‡æ–°åŠŸèƒ½ï¼ˆSearchBarã€FilterToolbarï¼‰æ‹†ç‚ºç¨ç«‹ QML å…ƒä»¶æª”æ¡ˆ",
    "terminalView ListView çš„ delegate æ•ˆèƒ½è‡³é—œé‡è¦ â€” é¿å…åœ¨ delegate ä¸­åšè¤‡é›œè¨ˆç®—ï¼Œæœå°‹åŒ¹é…çµæœé å…ˆç®—å¥½å­˜åœ¨ model æˆ– lookup map ä¸­",
    "SerialPortManager.h å·²å®£å‘Š reconnecting / reconnected / connectionLost ä¿¡è™Ÿä½† QML æœªè™•ç†ï¼Œå¯ä¸€ä½µåœ¨ CH-04 ä¸­åŠ å…¥æ–·ç·šé‡é€£çš„ UI å›é¥‹"
  ]
}
